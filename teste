def update_chamado(trace, chamado, update):
    log(trace, "Atualizando chamado", chamado=chamado, update=update)
    table.update_item(
        Key={"chamado": chamado},
        UpdateExpression="SET " + ", ".join(f"#{k} = :{k}" for k in update.keys()),
        ExpressionAttributeNames={f"#{k}": k for k in update.keys()},
        ExpressionAttributeValues={f":{k}": v for k, v in update.items()},
    )

    # ðŸ”‘ Buscar o estado completo do DynamoDB
    resp = table.get_item(Key={"chamado": chamado})
    state = resp.get("Item", {})
    log(trace, "Chamado atualizado (state completo)", state=state)
    return state
