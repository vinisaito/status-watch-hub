def handle_get_state(event, trace, body):
    chamado = int(body["chamado"])
    resp = table.get_item(Key={"chamado": chamado})
    state = resp.get("Item", {})
    log(trace, "Estado retornado", chamado=chamado, state=state)

    # Enviar resposta padronizada sรณ para o cliente que pediu
    conn_id = event["requestContext"]["connectionId"]
    payload = {
        "event": "getState",
        "chamado": chamado,
        "state": state
    }
    send_to_connection(conn_id, payload)

    return {
        "statusCode": 200,
        "body": json.dumps({"msg": "Estado enviado"}, cls=DecimalEncoder)
    }
