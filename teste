ws.onmessage = (event) => {
  try {
    const data = JSON.parse(event.data);
    console.log("Mensagem recebida:", data);

    if (data.action === "timerStarted") {
      setTimerStart(Number(data.timerStart));
      setChamadoId(Number(data.chamado));
    } else if (data.action === "statusUpdated") {
      setStatus(data.status);
    } else if (data.action === "currentState") {
      setTimerStart(Number(data.timerStart));
      setChamadoId(Number(data.chamado));
      setStatus(data.status);
    }
  } catch (err) {
    console.warn("Mensagem n√£o era JSON, ignorada:", event.data);
  }
};
