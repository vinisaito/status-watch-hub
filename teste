    for item in response.get("Items", []):
        try:
            apigw.post_to_connection(
                Data=to_json({
                    "action": "currentState",
                    "chamado": int(item["chamado"]),
                    "status": str(item.get("status", "pendente")),
                    "timerStart": int(item["timerStart"]) if "timerStart" in item else None
                }),
                ConnectionId=connection_id
            )
        except apigw.exceptions.GoneException:
            print(f"[WARN] Conexão {connection_id} está morta, removendo.")
            connections_table.delete_item(Key={"connectionId": connection_id})
        except Exception as e:
            print(f"Erro ao enviar estado inicial para {connection_id}: {e}")
